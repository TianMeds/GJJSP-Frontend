import{r as i,j as e}from"./react-DyBbpTfo.js";import{L as F}from"./Layout-BTsGQOv-.js";import{a as G}from"./index-CLUh4Q3Z.js";import{u as E,C as c}from"./react-hook-form-BLdPXlwC.js";import{t as L}from"./theme-D40dVDi4.js";import{u as $}from"./LoaderAnimation-CH_DHjss.js";import{T as W,i as B,G as o,a as h,P as H,j as x,k as j,l as f,M as m,m as I,F as P,C as q,B as V,g,S as y,A as b}from"./@mui-BieppYyU.js";import"./@babel-8cBiVioP.js";import"./react-router-Cd-RU2wi.js";import"./@remix-run-B-RBrVrq.js";import"./react-router-dom-CzVCKb4Q.js";import"./react-dom-BKrvlAQh.js";import"./scheduler-CzFDRTuY.js";import"./UserStore-CIOHG4rb.js";import"./zustand-BzSMVJrz.js";import"./use-sync-external-store-C98n5-Y-.js";import"./axios-B4uVmeYG.js";import"./clsx-B-dksMZM.js";import"./@emotion-C_NMWrO_.js";import"./hoist-non-react-statics-Buxaj0Kl.js";import"./react-is-8JwjhRSi.js";import"./stylis-BqmD5Vow.js";import"./react-transition-group-es_vqKy0.js";import"./@react-spring-V1f4ptoc.js";import"./d3-color-9lF95FHy.js";import"./d3-shape-D9lAmgB5.js";import"./d3-path-CimkQT29.js";import"./d3-scale-CFwq3Dxo.js";import"./internmap-BkD7Hj8s.js";import"./d3-array-DJclFi1f.js";import"./d3-format-CzD4bSOQ.js";import"./d3-interpolate-lgBfS8Nc.js";import"./d3-time-format-DZUSPL1N.js";import"./d3-time-Dz5jZYzf.js";import"./@popperjs-BQBsAJpH.js";function Fe(){const{getAuthToken:z,alertOpen:C,setAlertOpen:d,errorOpen:Y,setErrorOpen:u,alertMessage:A,setAlertMessage:Z,errorMessage:T,setErrorMessage:_}=G();$();const{control:l,watch:a,setValue:v,reset:J,isValid:k}=E({defaultValues:{reportType:"",year:"",currentYear:!1}}),[K,M]=i.useState(!1),[N,S]=i.useState(""),[n,R]=i.useState(new Date().getFullYear()),[O,w]=i.useState([]);i.useState(!0),i.useEffect(()=>{const r=new Date().toLocaleString("ph-PH",{timeZone:"Asia/Manila"});R(new Date(r).getFullYear())},[]),i.useEffect(()=>{w(Array.from({length:n-1989},(r,t)=>t+1989))},[n]);const D=r=>{console.log("Generating Report..."),r.preventDefault();const t=a(),s=t.currentYear?String(n):"fo";let p;t.reportType==="3"?p=`Both Mid-year and Year-end Accomplishment Reports for ${t.currentYear?"the current school year":`${s}`} will be generated. Are you sure?`:p=`${t.reportType==="1"?"Mid-year":"Year-end"} Accomplishment Report ${t.currentYear?`${s}`:`${s}`} will be generated. Are you sure?`,S(p),M(!0)};return e.jsx(F,{children:e.jsx(W,{theme:L,children:e.jsxs(B,{maxWidth:"lg",sx:{mt:4,mb:4},children:[e.jsxs(o,{container:!0,spacing:3,children:[e.jsx(o,{item:!0,xs:12,mb:4,children:e.jsx(h,{variant:"h1",id:"tabsTitle",sx:{color:"black"},children:"Generate Report"})}),e.jsx(o,{item:!0,xs:12,children:e.jsx(H,{sx:{p:4,maxWidth:"600px",width:"100%",mx:"auto"},children:e.jsxs("form",{onSubmit:D,children:[e.jsxs(o,{container:!0,spacing:3,children:[e.jsx(o,{item:!0,xs:12,children:e.jsx(h,{variant:"h4",sx:{fontWeight:"bold",mb:2},children:"Accomplishment Report"})}),e.jsx(o,{item:!0,xs:12,children:e.jsxs(x,{fullWidth:!0,children:[e.jsx(j,{id:"report-type-label",children:"Report Type *"}),e.jsx(c,{name:"reportType",control:l,rules:{required:"Report type is required"},render:({field:r})=>e.jsxs(f,{labelId:"report-type-label",label:"Report Type *",...r,children:[e.jsx(m,{value:"1",children:"Mid-year Accomplishment Report"}),e.jsx(m,{value:"2",children:"Year-end Accomplishment Report"})]})})]})}),e.jsx(o,{item:!0,xs:12,children:e.jsx(c,{name:"year",control:l,rules:{required:!a("currentYear")},render:({field:r,fieldState:t})=>e.jsxs(x,{fullWidth:!0,error:!k,children:[e.jsx(j,{id:"year-label",children:"Year *"}),"Generate Report Feature in Scholarlink 22",e.jsx(f,{labelId:"year-label",label:"Year *",...r,disabled:a("currentYear"),children:O.map(s=>e.jsx(m,{value:s,children:s},s))}),e.jsx(I,{children:t.error?t.error.message:null})]})})}),e.jsx(o,{item:!0,xs:12,children:e.jsx(c,{name:"currentYear",control:l,render:({field:r})=>e.jsx(P,{control:e.jsx(q,{...r,checked:r.value,onChange:t=>{const s=t.target.checked;r.onChange(s),v("year",s?String(n):"")}}),label:"Current Year"})})})]}),e.jsx(o,{item:!0,xs:12,children:e.jsxs(V,{display:"flex",justifyContent:"flex-start",children:[e.jsx(g,{onClick:"{handleClear}",disabled:!a("reportType")||!a("currentYear")&&!a("year"),children:"Clear"}),e.jsx(g,{variant:"contained",color:"primary",onClick:"{handleGenerateClick}",sx:{mt:3,mb:2},disabled:!a("reportType")||!a("currentYear")&&!a("year"),children:"Generate Report"})]})})]})})})]}),e.jsx(y,{open:C,autoHideDuration:5e3,onClose:()=>d(!1),anchorOrigin:{vertical:"top",horizontal:"right"},children:e.jsx(b,{onClose:()=>d(!1),variant:"filled",severity:"success",sx:{width:"100%"},children:A})}),e.jsx(y,{open:Y,autoHideDuration:5e3,onClose:()=>u(!1),anchorOrigin:{vertical:"top",horizontal:"right"},children:e.jsx(b,{onClose:()=>u(!1),variant:"filled",severity:"error",sx:{width:"100%"},children:T})})]})})})}export{Fe as default};
