import{r as ee,j as e}from"./react-DyBbpTfo.js";import{L as re}from"./Layout-BTsGQOv-.js";import{L as oe}from"./react-router-dom-CzVCKb4Q.js";import{u as ie}from"./SubmissionStore-Ceg7ZcXh.js";import{a as se,b as te}from"./index-CLUh4Q3Z.js";import{u as ae}from"./LoaderAnimation-CH_DHjss.js";import"./classnames-BKHECdoj.js";import{u as ne}from"./react-hook-form-BLdPXlwC.js";import{i as le,G as r,g as l,a as d,k as s,B as t,H as de,J as me,K as ce,j as pe,l as ue,M as a,N as xe,S as P,A as N}from"./@mui-BieppYyU.js";import"./@babel-8cBiVioP.js";import"./react-router-Cd-RU2wi.js";import"./@remix-run-B-RBrVrq.js";import"./UserStore-CIOHG4rb.js";import"./zustand-BzSMVJrz.js";import"./use-sync-external-store-C98n5-Y-.js";import"./theme-D40dVDi4.js";import"./react-dom-BKrvlAQh.js";import"./scheduler-CzFDRTuY.js";import"./axios-B4uVmeYG.js";import"./clsx-B-dksMZM.js";import"./@emotion-C_NMWrO_.js";import"./hoist-non-react-statics-Buxaj0Kl.js";import"./react-is-8JwjhRSi.js";import"./stylis-BqmD5Vow.js";import"./react-transition-group-es_vqKy0.js";import"./@react-spring-V1f4ptoc.js";import"./d3-color-9lF95FHy.js";import"./d3-shape-D9lAmgB5.js";import"./d3-path-CimkQT29.js";import"./d3-scale-CFwq3Dxo.js";import"./internmap-BkD7Hj8s.js";import"./d3-array-DJclFi1f.js";import"./d3-format-CzD4bSOQ.js";import"./d3-interpolate-lgBfS8Nc.js";import"./d3-time-format-DZUSPL1N.js";import"./d3-time-Dz5jZYzf.js";import"./@popperjs-BQBsAJpH.js";function ir(){var y,k,S,_,L,A,R,w,D,F,I,M,O,T,B,z,E,W,Y,G;ne();const{passYear:i,setPassYear:he,selectedSubmission:o,setSelectedSubmission:ge,modalStatus:V,setModalStatus:H,handleCloseStatusModal:c,disapprovalRemarks:g,setDisapprovalRemarks:f}=ie(),{getAuthToken:J,alertOpen:q,alertMessage:U,setAlertOpen:p,setAlertMessage:$,errorOpen:K,setErrorOpen:m,setErrorMessage:b,errorMessage:Q}=se(),{showPassword:fe,handleTogglePassword:be,setLoading:u,setLoadingMessage:X}=ae(),[j,Z]=ee.useState(""),v=async n=>{u(!0),X("Updating submission...");try{const x=J();let h="";n==="Approved"?h="Congratulations! You're approved. You can now submit your next term documents.":h=g,(await te.put(`/api/alumni-submission/${o.id}`,{submission_status:n,remarks_message:h},{headers:{Authorization:`Bearer ${x}`}})).status===200?($("Submission status updated successfully"),p(!0),c()):(b("Failed to update submission status"),m(!0)),u(!1)}catch(x){u(!1),console.error("Error updating submission status:",x),b("Failed to update submission status"),m(!0)}},C=n=>{Z(n),H(!0),f("")};return e.jsx(re,{children:e.jsx(le,{maxWidth:"lg",sx:{mt:4,mb:4},children:e.jsxs(r,{container:!0,spacing:3,children:[e.jsxs(r,{container:!0,alignItems:"center",justifyContent:"space-between",sx:{padding:"20px",backgroundColor:"#f0f0f0",borderRadius:"8px",boxShadow:"0px 4px 4px rgba(0, 0, 0, 0.25)"},children:[e.jsx(r,{item:!0,children:e.jsx(l,{variant:"contained",component:oe,to:"/submitted-alumni",sx:{color:"#fff",backgroundColor:"#1976d2","&:hover":{backgroundColor:"#1565c0"}},children:"Close"})}),e.jsx(r,{item:!0,children:e.jsxs(d,{variant:"subtitle1",sx:{fontWeight:"bold"},children:["Scholar Name:",o.user_first_name," ",o.user_last_name]})}),e.jsx(r,{item:!0,children:e.jsxs(d,{variant:"subtitle1",sx:{fontWeight:"bold"},children:["Renewal Form: ",(k=(y=o.alumni[i])==null?void 0:y[0])==null?void 0:k.submission_status]})}),e.jsx(r,{item:!0,children:e.jsxs(d,{variant:"subtitle1",sx:{fontWeight:"bold"},children:["Year: ",o.alumni&&Object.keys(o.alumni).length>0?Object.keys(o.alumni)[0]:"N/A Year"]})}),e.jsxs(r,{item:!0,children:[e.jsx(l,{variant:"contained",disabled:((_=(S=o.alumni[i])==null?void 0:S[0])==null?void 0:_.submission_status)==="Approved",onClick:()=>C("Approved"),sx:{backgroundColor:"#4caf50",color:"#fff","&:hover":{backgroundColor:"#388e3c"}},children:"Approve"}),e.jsx(l,{variant:"contained",disabled:((A=(L=o.alumni[i])==null?void 0:L[0])==null?void 0:A.submission_status)==="Approved",onClick:()=>C("Disapproved"),sx:{marginLeft:"10px",backgroundColor:"#f44336",color:"#fff","&:hover":{backgroundColor:"#d32f2f"}},children:"Disapprove"})]})]}),e.jsxs(r,{component:"form",method:"post",noValidate:!0,container:!0,spacing:3,sx:{mt:2,ml:2,display:"flex"},children:[e.jsx(r,{item:!0,xs:12,md:4,mt:5,children:e.jsxs(r,{container:!0,spacing:3,children:[e.jsxs(r,{item:!0,xs:12,children:[e.jsx(s,{htmlFor:"company_name",id:"currentCompanyLabel",children:"1. Current Company Name"}),e.jsx(t,{sx:{width:"100%",height:"50px",backgroundColor:"#f5f5f5",borderRadius:"4px",border:"1px solid #ccc",marginLeft:2,marginTop:2,marginBottom:2,display:"flex",alignItems:"center",padding:"1rem",fontSize:"1rem",color:"#333"},children:(w=(R=o.alumni[i])==null?void 0:R[0])==null?void 0:w.company_name})]}),e.jsxs(r,{item:!0,xs:12,children:[e.jsx(s,{htmlFor:"company_location",id:"currentCompanyLocationLabel",children:"2. Current Company Location"}),e.jsx(t,{sx:{width:"100%",height:"50px",backgroundColor:"#f5f5f5",borderRadius:"4px",border:"1px solid #ccc",marginLeft:2,marginTop:2,marginBottom:2,display:"flex",alignItems:"center",padding:"1rem",fontSize:"1rem",color:"#333"},children:(F=(D=o.alumni[i])==null?void 0:D[0])==null?void 0:F.company_location})]}),e.jsxs(r,{item:!0,xs:12,children:[e.jsx(s,{htmlFor:"position_in_company",id:"currentJobLabel",children:"3. Current Job Position"}),e.jsx(t,{sx:{width:"100%",height:"50px",backgroundColor:"#f5f5f5",borderRadius:"4px",border:"1px solid #ccc",marginLeft:2,marginTop:2,marginBottom:2,display:"flex",alignItems:"center",padding:"1rem",fontSize:"1rem",color:"#333"},children:(M=(I=o.alumni[i])==null?void 0:I[0])==null?void 0:M.position_in_company})]}),e.jsxs(r,{item:!0,xs:12,children:[e.jsx(s,{htmlFor:"licensure_exam_type",id:"licensureExamLabel",children:"4. Licensure Exam Type"}),e.jsx(t,{sx:{width:"100%",height:"50px",backgroundColor:"#f5f5f5",borderRadius:"4px",border:"1px solid #ccc",marginLeft:2,marginTop:2,marginBottom:2,display:"flex",alignItems:"center",padding:"1rem",fontSize:"1rem",color:"#333"},children:(T=(O=o.alumni[i])==null?void 0:O[0])==null?void 0:T.licensure_exam_type})]})]})}),e.jsx(r,{item:!0,xs:12,md:4,children:e.jsxs(r,{container:!0,spacing:3,mt:2,children:[e.jsxs(r,{item:!0,xs:12,children:[e.jsx(s,{htmlFor:"exam_passed_date",id:"examDateLabel",children:"5. Exam  Passed Date"}),e.jsx(t,{sx:{width:"100%",height:"50px",backgroundColor:"#f5f5f5",borderRadius:"4px",border:"1px solid #ccc",marginLeft:2,marginTop:2,marginBottom:2,display:"flex",alignItems:"center",padding:"1rem",fontSize:"1rem",color:"#333"},children:(z=(B=o.alumni[i])==null?void 0:B[0])==null?void 0:z.exam_passed_date})]}),e.jsxs(r,{item:!0,xs:12,children:[e.jsx(s,{htmlFor:"volunteer_group_name",id:"volunteerGroupLabel",children:"6. Volunteer Group Name (Optional)"}),e.jsx(t,{sx:{width:"100%",height:"50px",backgroundColor:"#f5f5f5",borderRadius:"4px",border:"1px solid #ccc",marginLeft:2,marginTop:2,marginBottom:2,display:"flex",alignItems:"center",padding:"1rem",fontSize:"1rem",color:"#333"},children:(W=(E=o.alumni[i])==null?void 0:E[0])==null?void 0:W.volunteer_group_name})]}),e.jsxs(r,{item:!0,xs:12,children:[e.jsx(s,{htmlFor:"yr_volunteered",id:"yearVolunteerLabel",children:"7. Year Volunteered (Optional)"}),e.jsx(t,{sx:{width:"100%",height:"50px",backgroundColor:"#f5f5f5",borderRadius:"4px",border:"1px solid #ccc",marginLeft:2,marginTop:2,marginBottom:2,display:"flex",alignItems:"center",padding:"1rem",fontSize:"1rem",color:"#333"},children:(G=(Y=o.alumni[i])==null?void 0:Y[0])==null?void 0:G.yr_volunteered})]})]})})]}),e.jsxs(de,{open:V,onClose:c,children:[e.jsx(me,{id:"dialogTitle",mt:2,children:"Update Submission Status"}),e.jsx(ce,{children:j==="Approved"?e.jsx(d,{variant:"body1",ml:1,sx:{color:"#44546F"},children:"Are you sure you want to approve this submission?"}):e.jsxs(e.Fragment,{children:[e.jsx(d,{variant:"body1",ml:1,sx:{color:"#44546F"},children:"Please select a reason for disapproval:"}),e.jsxs(pe,{fullWidth:!0,sx:{mt:2},children:[e.jsx(s,{id:"disapprovalRemarksLabel",children:"Disapproval Remarks"}),e.jsxs(ue,{id:"disapprovalRemarks",value:g,onChange:n=>f(n.target.value),fullWidth:!0,label:"Disapproval Remarks",children:[e.jsx(a,{value:"",children:"Select a Reason"}),e.jsx(a,{value:"Outdated Documents",children:"Outdated Documents"}),e.jsx(a,{value:"GWA Doesn't Match",children:"GWA Doesn't Match in the Documentary"}),e.jsx(a,{value:"Missing Required Information",children:"Missing Required Information"}),e.jsx(a,{value:"Incomplete Application",children:"Incomplete Renewal Document"}),e.jsx(a,{value:"Incorrect Format",children:"Incorrect Format"}),e.jsx(a,{value:"Other",children:"Other"})]})]})]})}),e.jsxs(xe,{children:[e.jsx(l,{onClick:c,variant:"contained",sx:{backgroundColor:"#f44336",color:"#fff","&:hover":{backgroundColor:"#d32f2f"}},children:"Cancel"}),j==="Approved"?e.jsx(l,{onClick:()=>v("Approved"),variant:"contained",sx:{backgroundColor:"#4caf50",color:"#fff","&:hover":{backgroundColor:"#388e3c"},mb:2,mt:2,mr:1},children:"Approve"}):e.jsx(l,{onClick:()=>v("For Resubmission"),variant:"contained",sx:{marginLeft:"10px",backgroundColor:"#f44336",color:"#fff","&:hover":{backgroundColor:"#f44336"}},children:"Disapprove"})]})]}),e.jsx(P,{open:q,autoHideDuration:5e3,onClose:()=>p(!1),anchorOrigin:{vertical:"top",horizontal:"right"},children:e.jsx(N,{onClose:()=>p(!1),variant:"filled",severity:"success",sx:{width:"100%"},children:U})}),e.jsx(P,{open:K,autoHideDuration:5e3,onClose:()=>m(!1),anchorOrigin:{vertical:"top",horizontal:"right"},children:e.jsx(N,{onClose:()=>m(!1),variant:"filled",severity:"error",sx:{width:"100%"},children:Q})})]})})})}export{ir as default};
