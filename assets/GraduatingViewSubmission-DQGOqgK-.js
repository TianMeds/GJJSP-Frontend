import{r as je,j as e}from"./react-DyBbpTfo.js";import{L as ye}from"./Layout-BTsGQOv-.js";import{L as ve}from"./react-router-dom-CzVCKb4Q.js";import{u as Ce}from"./SubmissionStore-Ceg7ZcXh.js";import{i as Se,G as o,g,a as s,k as i,B as a,t as ke,v as Ie,w as De,x as d,y as n,z as Re,a5 as x,R as Le,H as Ae,J as _e,K as Ne,j as Fe,l as Oe,M as m,N as we,S as ie,A as ae}from"./@mui-BieppYyU.js";import"./classnames-BKHECdoj.js";import{a as Te,b as ze}from"./index-CLUh4Q3Z.js";import{u as Ge}from"./LoaderAnimation-CH_DHjss.js";import{u as Ee}from"./react-hook-form-BLdPXlwC.js";import"./@babel-8cBiVioP.js";import"./react-router-Cd-RU2wi.js";import"./@remix-run-B-RBrVrq.js";import"./UserStore-CIOHG4rb.js";import"./zustand-BzSMVJrz.js";import"./use-sync-external-store-C98n5-Y-.js";import"./theme-D40dVDi4.js";import"./react-dom-BKrvlAQh.js";import"./scheduler-CzFDRTuY.js";import"./clsx-B-dksMZM.js";import"./@emotion-C_NMWrO_.js";import"./hoist-non-react-statics-Buxaj0Kl.js";import"./react-is-8JwjhRSi.js";import"./stylis-BqmD5Vow.js";import"./react-transition-group-es_vqKy0.js";import"./@react-spring-V1f4ptoc.js";import"./d3-color-9lF95FHy.js";import"./d3-shape-D9lAmgB5.js";import"./d3-path-CimkQT29.js";import"./d3-scale-CFwq3Dxo.js";import"./internmap-BkD7Hj8s.js";import"./d3-array-DJclFi1f.js";import"./d3-format-CzD4bSOQ.js";import"./d3-interpolate-lgBfS8Nc.js";import"./d3-time-format-DZUSPL1N.js";import"./d3-time-Dz5jZYzf.js";import"./@popperjs-BQBsAJpH.js";import"./axios-B4uVmeYG.js";function Dr(){var R,L,A,_,N,F,O,w,T,z,G,E,M,P,W,B,Y,H,q,U,$,J,K,V,Q,X,Z,ee,re,te,oe,se;Ee();const{selectedSubmission:r,setSelectedSubmission:Me,passYear:t,setPassYear:Pe,setModalStatus:le,modalStatus:de,disapprovalRemarks:v,setDisapprovalRemarks:C,handleCloseStatusModal:h}=Ce(),{getAuthToken:ce,alertOpen:xe,alertMessage:me,setAlertOpen:j,setAlertMessage:ue,errorOpen:pe,setErrorOpen:f,setErrorMessage:S,errorMessage:ge}=Te(),{showPassword:We,handleTogglePassword:Be,setLoading:y,setLoadingMessage:he}=Ge(),[k,fe]=je.useState(""),c=(l,u=50)=>{const p=l.split("/"),ne=p[p.length-1].split(".");ne.pop();let b=ne.join(".");return b.length>u&&(b=b.substring(0,u)+"..."),b},I=async l=>{y(!0),he("Updating submission...");try{const u=ce();let p="";l==="Approved"?p="Congratulations! You're approved. You can now wait for the next submission.":p=v,(await ze.put(`/api/graduating-submission/${r.id}`,{submission_status:l,remarks_message:p},{headers:{Authorization:`Bearer ${u}`}})).status===200?(ue("Submission status updated successfully"),j(!0),h()):(S("Failed to update submission status"),f(!0),h()),y(!1)}catch(u){y(!1),console.error("Error updating submission status:",u),S("Failed to update submission status"),f(!0)}},D=l=>{fe(l),le(!0),C("")};return e.jsx(ye,{children:e.jsx(Se,{maxWidth:"lg",sx:{mt:4,mb:4},children:e.jsxs(o,{container:!0,spacing:3,children:[e.jsxs(o,{container:!0,alignItems:"center",justifyContent:"space-between",sx:{padding:"20px",backgroundColor:"#f0f0f0",borderRadius:"8px",boxShadow:"0px 4px 4px rgba(0, 0, 0, 0.25)"},children:[e.jsx(o,{item:!0,children:e.jsx(g,{variant:"contained",component:ve,to:"/submitted-graduating",sx:{color:"#fff",backgroundColor:"#1976d2","&:hover":{backgroundColor:"#1565c0"}},children:"Close"})}),e.jsx(o,{item:!0,children:e.jsxs(s,{variant:"subtitle1",sx:{fontWeight:"bold"},children:["Scholar Name: ",r.user_first_name," ",r.user_middle_name||""," ",r.user_last_name]})}),e.jsx(o,{item:!0,children:e.jsxs(s,{variant:"subtitle1",sx:{fontWeight:"bold"},children:["Graduating Form: ",((L=(R=r.graduating[t])==null?void 0:R[0])==null?void 0:L.submission_status)||"No Submission"]})}),e.jsx(o,{item:!0,children:e.jsxs(s,{children:["SY : ",r.graduating&&Object.keys(r.graduating).length>0?Object.keys(r.graduating)[0]:"N/A Year"]})}),e.jsxs(o,{item:!0,children:[e.jsx(g,{variant:"contained",disabled:((_=(A=r.graduating[t])==null?void 0:A[0])==null?void 0:_.submission_status)==="Approved",onClick:()=>D("Approved"),sx:{backgroundColor:"#4caf50",color:"#fff","&:hover":{backgroundColor:"#388e3c"}},children:"Approve"}),e.jsx(g,{variant:"contained",disabled:((F=(N=r.graduating[t])==null?void 0:N[0])==null?void 0:F.submission_status)==="Approved",onClick:()=>D("Disapproved"),sx:{marginLeft:"10px",backgroundColor:"#f44336",color:"#fff","&:hover":{backgroundColor:"#d32f2f"}},children:"Disapprove"})]})]}),e.jsx(o,{container:!0,spacing:3,sx:{mt:2,ml:2,display:"flex"},children:e.jsx(o,{item:!0,xs:12,md:12,mt:5,children:e.jsxs(o,{container:!0,spacing:3,children:[e.jsxs(o,{item:!0,xs:12,sm:6,children:[e.jsxs(o,{item:!0,xs:12,children:[e.jsx(i,{htmlFor:"graduateName",id:"graduateNameLabel",children:"1. Graduate Name"}),e.jsxs(a,{sx:{width:"100%",height:"50px",backgroundColor:"#f5f5f5",borderRadius:"4px",border:"1px solid #ccc",marginLeft:2,marginTop:2,marginBottom:2,display:"flex",alignItems:"center",padding:"1rem",fontSize:"1rem",color:"#333"},children:[r.user_first_name," ",r.user_middle_name||""," ",r.user_last_name]})]}),e.jsxs(o,{item:!0,xs:12,children:[e.jsx(i,{htmlFor:"schoolGraduated",id:"schoolGraduatedLabel",children:"2. School Graduating"}),e.jsx(a,{sx:{width:"100%",height:"50px",backgroundColor:"#f5f5f5",borderRadius:"4px",border:"1px solid #ccc",marginLeft:2,marginTop:2,marginBottom:2,display:"flex",alignItems:"center",padding:"1rem",fontSize:"1rem",color:"#333"},children:((w=(O=r.graduating[t])==null?void 0:O[0])==null?void 0:w.schoolGraduated)||"No School Input"})]}),e.jsxs(o,{item:!0,xs:12,children:[e.jsx(i,{htmlFor:"addressSchool",id:"addressSchoolLabel",children:"3. School Address"}),e.jsx(a,{sx:{width:"100%",height:"50px",backgroundColor:"#f5f5f5",borderRadius:"4px",border:"1px solid #ccc",marginLeft:2,marginTop:2,marginBottom:2,display:"flex",alignItems:"center",padding:"1rem",fontSize:"1rem",color:"#333"},children:((z=(T=r.graduating[t])==null?void 0:T[0])==null?void 0:z.addressSchool)||"No Address Input"})]}),e.jsxs(o,{item:!0,xs:12,children:[e.jsx(i,{htmlFor:"yearEnteredGraduated",id:"yearEnteredGraduatedLabel",children:"4. Year Entered & Graduated"}),e.jsx(a,{sx:{width:"100%",height:"50px",backgroundColor:"#f5f5f5",borderRadius:"4px",border:"1px solid #ccc",marginLeft:2,marginTop:2,marginBottom:2,display:"flex",alignItems:"center",padding:"1rem",fontSize:"1rem",color:"#333"},children:((E=(G=r.graduating[t])==null?void 0:G[0])==null?void 0:E.yearEnteredGraduated)||"No Year Input"})]}),e.jsxs(o,{item:!0,xs:12,children:[e.jsx(i,{htmlFor:"program",id:"programLabel",children:"5. College Course"}),e.jsx(a,{sx:{width:"100%",height:"50px",backgroundColor:"#f5f5f5",borderRadius:"4px",border:"1px solid #ccc",marginLeft:2,marginTop:2,display:"flex",alignItems:"center",padding:"1rem",fontSize:"1rem",color:"#333"},children:((P=(M=r.graduating[t])==null?void 0:M[0])==null?void 0:P.program)||"No Program Input"})]})]}),e.jsxs(o,{item:!0,xs:12,sm:6,children:[e.jsxs(o,{item:!0,xs:12,children:[e.jsx(i,{htmlFor:"street",id:"streetGraduateLabel",children:"6. Mailing Address"}),e.jsx(a,{sx:{width:"100%",height:"50px",backgroundColor:"#f5f5f5",borderRadius:"4px",border:"1px solid #ccc",marginLeft:2,marginTop:2,marginBottom:2,display:"flex",alignItems:"center",padding:"1rem",fontSize:"1rem",color:"#333"},children:((B=(W=r.graduating[t])==null?void 0:W[0])==null?void 0:B.street)||"No Street Input"})]}),e.jsxs(o,{item:!0,xs:12,children:[e.jsx(i,{htmlFor:"user_email_address",id:"userEmailAddressLabel",children:"7. Email Address"}),e.jsx(a,{sx:{width:"100%",height:"50px",backgroundColor:"#f5f5f5",borderRadius:"4px",border:"1px solid #ccc",marginLeft:2,marginTop:2,marginBottom:2,display:"flex",alignItems:"center",padding:"1rem",fontSize:"1rem",color:"#333"},children:r.user_email_address||"No Email Input"})]}),e.jsxs(o,{item:!0,xs:12,children:[e.jsx(i,{htmlFor:"user_mobile_num",id:"userMobileNumLabel",children:"8. Contact Number "}),e.jsx(a,{sx:{width:"100%",height:"50px",backgroundColor:"#f5f5f5",borderRadius:"4px",border:"1px solid #ccc",marginLeft:2,marginTop:2,marginBottom:2,display:"flex",alignItems:"center",padding:"1rem",fontSize:"1rem",color:"#333"},children:r.user_mobile_num||"No Contact Number Input"})]}),e.jsxs(o,{item:!0,xs:12,children:[e.jsx(i,{htmlFor:"futurePlan",id:"futurePlanLabel",children:"9. Future Plan (Optional) "}),e.jsx(a,{sx:{width:"100%",height:"50px",backgroundColor:"#f5f5f5",borderRadius:"4px",border:"1px solid #ccc",marginLeft:2,marginTop:2,marginBottom:2,display:"flex",alignItems:"center",padding:"1rem",fontSize:"1rem",color:"#333"},children:((H=(Y=r.graduating[t])==null?void 0:Y[0])==null?void 0:H.futurePlan)||"No Future Plan Input"})]})]})]})})}),e.jsx(o,{item:!0,xs:12,children:e.jsx(s,{variant:"h6",sx:{fontWeight:"bold"},children:"Documentary Requirements"})}),e.jsxs(o,{item:!0,xs:12,sm:12,children:[e.jsxs(ke,{sx:{backgroundColor:"#fbf3f2",margin:"2rem 0 0 1rem"},children:[e.jsxs(Ie,{children:[e.jsx(De,{children:e.jsxs(d,{children:[e.jsx(n,{children:"Description"}),e.jsx(n,{children:"File"})]})}),e.jsxs(Re,{children:[e.jsxs(d,{children:[e.jsx(n,{sx:{border:"none",display:"flex",alignItems:"flex-start",marginLeft:"-8px"},children:e.jsx(s,{variant:"body1",children:"Copy of Report Card of the previous semester"})}),e.jsx(n,{sx:{border:"none"},children:e.jsx(o,{sx:{display:"flex",alignItems:"center"},children:(U=(q=r.graduating[t])==null?void 0:q[0])!=null&&U.copyOfReportCard?e.jsxs("a",{href:r.graduating[t][0].copyOfReportCard,target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none",display:"flex",alignItems:"center",gap:"4px",color:"#1976d2",cursor:"pointer"},children:[e.jsx(x,{style:{fontSize:"1.2rem"}}),e.jsx(s,{variant:"body1",style:{color:"#1976d2",textDecoration:"none"},children:c(r.graduating[t][0].copyOfReportCard)})]}):e.jsx(s,{variant:"body1",style:{color:"#1976d2",textDecoration:"none"},children:"No submission"})})})]}),e.jsxs(d,{children:[e.jsx(n,{sx:{border:"none",display:"flex",alignItems:"flex-start",marginLeft:"-8px"},children:e.jsx(s,{variant:"body1",children:"Copy of School Registration Form (RF)"})}),e.jsx(n,{sx:{border:"none"},children:e.jsx(o,{sx:{display:"flex",alignItems:"center"},children:(J=($=r.graduating[t])==null?void 0:$[0])!=null&&J.copyOfRegistrationForm?e.jsxs("a",{href:r.graduating[t][0].copyOfRegistrationForm,target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none",display:"flex",alignItems:"center",gap:"4px",color:"#1976d2",cursor:"pointer"},children:[e.jsx(x,{style:{fontSize:"1.2rem"}}),e.jsx(s,{variant:"body1",style:{color:"#1976d2",textDecoration:"none"},children:c(r.graduating[t][0].copyOfRegistrationForm)})]}):e.jsx(s,{variant:"body1",style:{color:"#1976d2",textDecoration:"none"},children:"No submission"})})})]}),e.jsxs(d,{children:[e.jsx(n,{sx:{border:"none",display:"flex",alignItems:"flex-start",marginLeft:"-8px"},children:e.jsx(s,{variant:"body1",children:"Scanned Written Essay"})}),e.jsx(n,{sx:{border:"none"},children:e.jsx(o,{sx:{display:"flex",alignItems:"center"},children:(V=(K=r.graduating[t])==null?void 0:K[0])!=null&&V.scannedWrittenEssay?e.jsxs("a",{href:r.graduating[t][0].scannedWrittenEssay,target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none",display:"flex",alignItems:"center",gap:"4px",color:"#1976d2",cursor:"pointer"},children:[e.jsx(x,{style:{fontSize:"1.2rem"}}),e.jsx(s,{variant:"body1",style:{color:"#1976d2",textDecoration:"none"},children:c(r.graduating[t][0].scannedWrittenEssay)})]}):e.jsx(s,{variant:"body1",style:{color:"#1976d2",textDecoration:"none"},children:"No submission"})})})]}),e.jsxs(d,{children:[e.jsx(n,{sx:{border:"none",display:"flex",alignItems:"flex-start",marginLeft:"-8px"},children:e.jsx(s,{variant:"body1",children:" Letter of gratitude to benefactor"})}),e.jsx(n,{sx:{border:"none"},children:e.jsx(o,{sx:{display:"flex",alignItems:"center"},children:(X=(Q=r.graduating[t])==null?void 0:Q[0])!=null&&X.letterOfGratitude?e.jsxs("a",{href:r.graduating[t][0].letterOfGratitude,target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none",display:"flex",alignItems:"center",gap:"4px",color:"#1976d2",cursor:"pointer"},children:[e.jsx(x,{style:{fontSize:"1.2rem"}}),e.jsx(s,{variant:"body1",style:{color:"#1976d2",textDecoration:"none"},children:c(r.graduating[t][0].letterOfGratitude)})]}):e.jsx(s,{variant:"body1",style:{color:"#1976d2",textDecoration:"none"},children:"No submission"})})})]}),e.jsxs(d,{children:[e.jsx(n,{sx:{border:"none",display:"flex",alignItems:"flex-start",marginLeft:"-8px"},children:e.jsx(s,{variant:"body1",children:"Statement of account issued by the school"})}),e.jsx(n,{sx:{border:"none"},children:e.jsx(o,{sx:{display:"flex",alignItems:"center"},children:(ee=(Z=r.graduating[t])==null?void 0:Z[0])!=null&&ee.statementOfAccount?e.jsxs("a",{href:r.graduating[t][0].statementOfAccount,target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none",display:"flex",alignItems:"center",gap:"4px",color:"#1976d2",cursor:"pointer"},children:[e.jsx(x,{style:{fontSize:"1.2rem"}}),e.jsx(s,{variant:"body1",style:{color:"#1976d2",textDecoration:"none"},children:c(r.graduating[t][0].statementOfAccount)})]}):e.jsx(s,{variant:"body1",style:{color:"#1976d2",textDecoration:"none"},children:"No submission"})})})]}),e.jsxs(d,{children:[e.jsx(n,{sx:{border:"none",display:"flex",alignItems:"flex-start",marginLeft:"-8px"},children:e.jsx(s,{variant:"body1",children:" Graduation Picture"})}),e.jsx(n,{sx:{border:"none"},children:e.jsx(o,{sx:{display:"flex",alignItems:"center"},children:(te=(re=r.graduating[t])==null?void 0:re[0])!=null&&te.graduationPicture?e.jsxs("a",{href:r.graduating[t][0].graduationPicture,target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none",display:"flex",alignItems:"center",gap:"4px",color:"#1976d2",cursor:"pointer"},children:[e.jsx(x,{style:{fontSize:"1.2rem"}}),e.jsx(s,{variant:"body1",style:{color:"#1976d2",textDecoration:"none"},children:c(r.graduating[t][0].graduationPicture)})]}):e.jsx(s,{variant:"body1",style:{color:"#1976d2",textDecoration:"none"},children:"No submission"})})})]}),e.jsxs(d,{children:[e.jsx(n,{sx:{border:"none",display:"flex",alignItems:"flex-start",marginLeft:"-8px"},children:e.jsx(s,{variant:"body1",children:"Transcript of records"})}),e.jsx(n,{sx:{border:"none"},children:e.jsx(o,{sx:{display:"flex",alignItems:"center"},children:(se=(oe=r.graduating[t])==null?void 0:oe[0])!=null&&se.transcriptOfRecords?e.jsxs("a",{href:r.graduating[t][0].transcriptOfRecords,target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none",display:"flex",alignItems:"center",gap:"4px",color:"#1976d2",cursor:"pointer"},children:[e.jsx(x,{style:{fontSize:"1.2rem"}}),e.jsx(s,{variant:"body1",style:{color:"#1976d2",textDecoration:"none"},children:c(r.graduating[t][0].transcriptOfRecords)})]}):e.jsx(s,{variant:"body1",style:{color:"#1976d2",textDecoration:"none"},children:"No submission"})})})]})]})]}),e.jsx(Le,{sx:{width:"100%"}})]}),e.jsxs(Ae,{open:de,onClose:h,children:[e.jsx(_e,{id:"dialogTitle",mt:2,children:"Update Submission Status"}),e.jsx(Ne,{children:k==="Approved"?e.jsx(s,{variant:"body1",ml:1,sx:{color:"#44546F"},children:"Are you sure you want to approve this submission?"}):e.jsxs(e.Fragment,{children:[e.jsx(s,{variant:"body1",ml:1,sx:{color:"#44546F"},children:"Please select a reason for disapproval:"}),e.jsxs(Fe,{fullWidth:!0,sx:{mt:2},children:[e.jsx(i,{id:"disapprovalRemarksLabel",children:"Disapproval Remarks"}),e.jsxs(Oe,{id:"disapprovalRemarks",value:v,onChange:l=>C(l.target.value),fullWidth:!0,label:"Disapproval Remarks",children:[e.jsx(m,{value:"",children:"Select a Reason"}),e.jsx(m,{value:"Outdated Documents",children:"Outdated Documents"}),e.jsx(m,{value:"GWA Doesn't Match",children:"GWA Doesn't Match in the Documentary"}),e.jsx(m,{value:"Missing Required Information",children:"Missing Required Information"}),e.jsx(m,{value:"Incomplete Application",children:"Incomplete Renewal Document"}),e.jsx(m,{value:"Incorrect Format",children:"Incorrect Format"}),e.jsx(m,{value:"Other",children:"Other"})]})]})]})}),e.jsxs(we,{children:[e.jsx(g,{onClick:h,variant:"contained",sx:{backgroundColor:"#f44336",color:"#fff","&:hover":{backgroundColor:"#d32f2f"}},children:"Cancel"}),k==="Approved"?e.jsx(g,{onClick:()=>I("Approved"),variant:"contained",sx:{backgroundColor:"#4caf50",color:"#fff","&:hover":{backgroundColor:"#388e3c"},mb:2,mt:2,mr:1},children:"Approve"}):e.jsx(g,{onClick:()=>I("For Resubmission"),variant:"contained",sx:{marginLeft:"10px",backgroundColor:"#f44336",color:"#fff","&:hover":{backgroundColor:"#f44336"}},children:"Disapprove"})]})]}),e.jsx(ie,{open:xe,autoHideDuration:5e3,onClose:()=>j(!1),anchorOrigin:{vertical:"top",horizontal:"right"},children:e.jsx(ae,{onClose:()=>j(!1),variant:"filled",severity:"success",sx:{width:"100%"},children:me})}),e.jsx(ie,{open:pe,autoHideDuration:5e3,onClose:()=>f(!1),anchorOrigin:{vertical:"top",horizontal:"right"},children:e.jsx(ae,{onClose:()=>f(!1),variant:"filled",severity:"error",sx:{width:"100%"},children:ge})})]})]})})})}export{Dr as default};
